
<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>

    <title>Eyesbet Bet Detail</title>
    
    <link rel="stylesheet" href="css/themes/eyesbet_1.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile.structure-1.3.0.min.css" />
    <link rel="stylesheet" href="css/jquery-mobile-iscrollview.css"/>
    
 <script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
     <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <script src="js/iscroll.js"></script>
    <script src="js/jquery-mobile-iscrollview.js"></script>
 <script type="text/javascript">
  
     $(document).ready(function() {
                       
                       
                       
                       $.mobile.showPageLoadingMsg();
                       
                       
                       
                       $.ajax({
                              type: 'GET',
                              url: "http://eyesbet.com/m.betDetail",
                              dataType: "xml",
                              
                              success: function (xml) {
                              
                              parseBet(xml);
                              
                              $.mobile.hidePageLoadingMsg();
                              
                              
                              }, 
                              error: function(xhr, textStatus, error){
                                 $.mobile.hidePageLoadingMsg();

                              alert( error);
                              },
                              }); 
    });
     
    
     
     function parseBet(xml) {
    	 
    	 $('#detail').empty();
    	 xml = $(xml).find("xml");
         betId = xml.attr("betid");
         type =  xml.attr("type");
         document.getElementById('betid').value = betId;
         
         var status = "";
         var h; var a; var hs; var as; var gameId;
         $('#detail').append("<tr><td colspan='2' align='center' style='font-weight:bold'><div style='background-color:lightgray;height:20px'> "+xml.attr("name")+" <a href='#dialogPage' data-transition='slidedown'  data-rel='dialog'>Change</a> </div>  </td></tr>");
         $(xml).find("game").each(function () {
                                            
                                  h = $(this).attr("h");
                                  a = $(this).attr("a");
                                  as = $(this).attr("as");
                                  hs = $(this).attr("hs");
                                  gameId = $(this).attr("id");
                                  
                    $(this).find("gamebet").each(function() {
                                
                      if ($(this).attr("ismoneyline") == "true") {
                                         
                        status = getStatus($(this).attr("moneylinestt"));
                                                 
                         $('#detail').append("<tr><td colspan='2'>"+ a + " " + as +   " @ " + h + " " + hs + "</td></tr>");
                                                         
                         if (type == "parlay") { 
	                         $('#detail').append("<tr><td ><img src='"+status+"' height='15px' /> <b>Money Line:</b> "+$(this).attr("moneyline")+ " </td><td align='right'><a href='#' onclick=\"return deleteGamebet('"+betId+"','"+gameId+"','mn')\" ><img src='img/delete.png'/> </a> </td></tr>");
	                                                 printLine();
                            } else {
                            	  $('#detail').append("<tr><td colspan='2' ><img src='"+status+"' height='15px' /> <b>Money Line:</b> "+$(this).attr("moneyline")+ " </td></tr>");
                                  printLine();
                            }
                                                         
                            }  if ( $(this).attr("ispoints") == "true" ) {
                                                 
                                 status = getStatus($(this).attr("spreadpointstt"));
                                 $('#detail').append("<tr><td colspan='2'>"+ a + " " + as +   " @ " + h + " " + hs + "</td></tr>");
                                                 
                                $('#detail').append("<tr> <td ><img src='"+status+"' height='15px'/> <b>Point Spread: </b> "+$(this).attr("spreadpointteam") + ": "+ $(this).attr("spreadpointsign") +"</td><td align='right'> <a href='#' onclick=\"return deleteGamebet('"+betId+"','"+gameId+"','sp')\" > <img src='img/delete.png'/> </a> </td></tr>");
                                   
                                                 printLine();
                                                 
                                                 
                                } if ( $(this).attr("isoverunder") == "true" && $(this).attr("isunder") == "true"  ) {
                                                 status = getStatus($(this).attr("oustt"));
                                 $('#detail').append("<tr><td colspan='2'>"+ a + " " + as +   " @ " + h + " " + hs + "</td></tr>");
                                
                                  $('#detail').append("<tr> <td ><img src='"+status+"' height='15px'/> <b>Under: </b> "+$(this).attr("underpoints") + "</td><td align='right'> <a href='' onclick=\"return deleteGamebet('"+betId+"','"+gameId+"','ou')\" ><img src='img/delete.png'/></a> </td></tr>");
                                                 printLine();

         
                                } else if ( $(this).attr("isoverunder") == "true" && $(this).attr("isunder") == "false" ) {
                                                 
                                                 status = getStatus($(this).attr("oustt"));
                                  $('#detail').append("<tr><td colspan='2'>"+ a + " " + as +   " @ " + h + " " + hs + "</td></tr>");

         
                                    $('#detail').append("<tr> <td ><img src='"+status+"' height='15px' /> <b>Over: </b> "+$(this).attr("overpoints") + "</td><td align='right'> <a href=''onclick=\"return deleteGamebet('"+betId+"','"+gameId+"','ou')\" ><img src='img/delete.png'/> </a> </td></tr>");
                                                 
                                                 printLine();

         
                                    }   
         
                                                         
                                    });
                                  
                                  });
         
         
         $('#scroller').show().trigger("updatelayout");

         
     }
     
     
     function printLine()    {
         
          $('#detail').append("<tr><td colspan='2' style='border-top-width:1px;border-top-style:solid;border-top-color:black' > </td></tr>");
         
     }
     
                                
                      
     function getStatus(s) {
         status = "";
       if(  s == "WON") {
             status = "img/ok.png";
         } else if (s == "LOST") {
             
             status = "img/cancel.png";
         } else {
             status = "";
         }

         return status;
         
     }
     
     
     
     function createBet() {
         window.location = "displayLeagues.html";
     }
     
     function logout() {
         
         $.ajax({
                type: 'GET',
                url: 'http://eyesbet.com/m.logout',
                dataType: 'xml',
                
                success: function (xml) {
             
                
                
                },
                error: function(xhr, textStatus, error){
                //alert( error);
                },
                });
         
         
         
         
         window.location = "index.html";
     }
    
     
     function deleteBet( ) {
         
         result = window.confirm("Delete Bet?")
         
         
         if (result == true) {
             betid = document.getElementById('betid').value;

             $.ajax({
                    type: 'POST',
                    data: "betId="+betid,
                    url: 'http://eyesbet.com/m.removeBet',
                    dataType: 'xml',
                    
                    success: function(xml){
                    alert("Bet removed successfully");
                    window.location= "displayBets.html";
                    
                    },
                    error: function(xhr, textStatus, error){
                    
                    alert(error);
                    }
                    });
             
             
             return true;
             
         } else {
             
             
             return false;
         }
         

     }
     
     function deleteGamebet(betId, gameId, type) {
    
    	  result = window.confirm("Delete Bet?")
  
          if (result == true) {
              $.mobile.showPageLoadingMsg();

              $.ajax({
                     type: 'GET',
                     data: "betId="+betId+"&gameId="+gameId+"&type="+type+"&cmd=deleteParlay",
                     url: 'http://eyesbet.com/m.editBet',
                     dataType: 'xml',
                     
                     success: function(xml){
                    
                         $.mobile.hidePageLoadingMsg();
						  window.location.reload();
						 
                     },
                     error: function(xhr, textStatus, error){
                        $.mobile.hidePageLoadingMsg();

                     alert(xhr.responseText);
                     
                     
                     }
                     });
              
              
              return true;
              
          } else {
              
              
              return false;
          }
          
    	 
    	 
    	 
     }
     
     function goback() {
    	 
    	 window.location="displayBets.html";
     }
 
 </script>
  

</head>
<body>

    <div data-role="page" id="page1" >
        
        
        <div data-role="header" data-theme="a"  data-position="fixed">
            
            
            <h1>Bet Detail</h1>
   
        </div>
    
 <div data-role="content" data-iscroll >
 
    
     <div id="scroller">
         
         
         <div align="center" > 
          <fieldset    data-role="controlgroup" data-type="horizontal" >
           <a href="#" id="betid" onclick="deleteBet()" data-inline="true" data-iconpos="left" data-icon="delete" data-theme="a" data-role="button" > Delete All </a>
             <a href="#"   data-inline="true" data-icon="add" data-theme="a" data-iconpos="right" data-role="button" > Add New </a>
           </fieldset>
         </div>
         
         
         <table style="margin-top:20px;width:100%" id="detail" cellpadding="3" >
             
            
             
        </table>
        
          <input type="hidden"  id="betid" value="" />
       
         
         
    </div>
     
     
  

</div>
        
        <div align="center" data-theme="a" data-role="footer" data-position="fixed">
            
            
            
            <button  data-theme="a" onclick="goback()" data-icon="arrow-l" data-iconpos="left" data-inline="true" >Back</button>
            
            
        </div>
     
     
</div>

<div data-role="page" id="dialogPage">
<div data-role="header">
<h2>Edit Bet Name</h2>
</div>
<div data-role="content">
 Enter new name: <input type="text" name="betName" />
 <br/>
  <a href="#" onclick=""  data-iconpos="left" data-icon="delete" data-theme="a" data-role="button" > Submit </a>
 
</div>
</div>


</body>
</html>